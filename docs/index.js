(()=>{"use strict";const e={"a-b":["2021-08-21 18:00:00","2021-08-21 18:30:00","2021-08-21 18:45:00","2021-08-21 19:00:00","2021-08-21 19:15:00","2021-08-21 21:00:00"],"b-a":["2021-08-21 18:30:00","2021-08-21 18:45:00","2021-08-21 19:00:00","2021-08-21 19:15:00","2021-08-21 19:35:00","2021-08-21 21:50:00","2021-08-21 21:55:00"]};let t=!1;function n(){const e=document.querySelector("#route").value;switch(e){case"roundtrip":!function(){const e=document.createElement("select"),u=document.createElement("label");document.querySelector("#lab_time").textContent="дорога в том направлении",e.name="back",e.id="back",r("b-a",e),u.textContent="обратная дорога ",document.querySelector("#calendar").append(u),document.querySelector("#calendar").append(e),n("a-b"),o(),document.querySelector("#time").addEventListener("change",o),t=!0}();break;default:n(e)}function n(e){const t=document.querySelector("#time");t.innerHTML="",r(e,t),document.querySelector("#time").removeEventListener("change",o)}}function o(){const t=document.querySelector("#back");t.innerHTML="";const n=u(document.querySelector("#time").value);n.setMinutes(n.getMinutes()+50);for(const o of e["b-a"]){const e=u(o);if(n<e){const n=document.createElement("option"),o=`${e.getFullYear()}-${c(e.getMonth()+1)}-${c(e.getDate())} ${c(e.getHours())}:${c(e.getMinutes())}:${c(e.getSeconds())}`;n.value=o,n.innerHTML=o,t.append(n)}}}function r(t,n){for(const o of e[t]){const e=document.createElement("option"),t=u(o),r=`${t.getFullYear()}-${c(t.getMonth()+1)}-${c(t.getDate())} ${c(t.getHours())}:${c(t.getMinutes())}:${c(t.getSeconds())}`;e.value=r,e.innerHTML=r,n.append(e)}}function u(e){const t=e.replaceAll(/[-]/gi,"/");return new Date(`${t} GMT+0300`)}function c(e){return e<10&&(e=`0${e}`),e}document.querySelector("#route").addEventListener("change",(()=>{1==t&&(document.querySelector("#lab_time").textContent="Выберите время",document.querySelector("#calendar").removeChild(document.querySelector("#calendar").lastChild),document.querySelector("#calendar").removeChild(document.querySelector("#calendar").lastChild),t=!1),n()})),document.querySelector("#count_up").addEventListener("click",(()=>{let e=0;const n=document.querySelector("#route"),o=document.querySelector("#info"),r=a("time");if(+document.querySelector("#num").value>=0?e=+document.querySelector("#num").value:document.querySelector("#num").value=e,!1===t)o.innerHTML=`Вы выбрали ${e} билета по маршруту из ${n.value.toUpperCase().replace("-"," в ")} стоимостью ${"700"*e}р. Это путешествие займет у вас 50 минут. Теплоход отправляется в ${c(r.startdate.getHours())}-${c(r.startdate.getMinutes())}, а прибудет в ${c(r.enddate.getHours())}-${c(r.enddate.getMinutes())}. `;else{const t=a("back");o.innerHTML=`Вы выбрали ${e} билета по маршруту из А в В и обратно стоимостью ${"1200"*e}р. Это путешествие займет у вас 100 минут. Теплоход отправляется в ${c(r.startdate.getHours())}-${c(r.startdate.getMinutes())}, а прибудет в ${c(r.enddate.getHours())}-${c(r.enddate.getMinutes())}. А обратно поплывет в ${c(t.startdate.getHours())}-${c(t.startdate.getMinutes())} и прибудет в ${c(t.enddate.getHours())}-${c(t.enddate.getMinutes())} `}function a(e){const t=u(document.querySelector(`#${e}`).value),n=u(document.querySelector(`#${e}`).value);return n.setMinutes(n.getMinutes()+50),{startdate:t,enddate:n}}document.body.append(o)})),window.addEventListener("load",(()=>{n()}))})();